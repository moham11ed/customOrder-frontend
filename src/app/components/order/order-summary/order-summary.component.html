<div class="container mt-4">
  <div class="card">
    <div class="card-header bg-primary text-white">
      <h2 class="mb-0">Order Summary</h2>
    </div>
    
    <div class="card-body">
      <!-- Product Information -->
      <div class="mb-4 p-3 border rounded" *ngIf="orderData.productType">
        <h3 class="card-title">Product Information</h3>
        <div class="row">
          <div class="col-md-6">
            <div class="border-bottom pb-2 mb-2" *ngIf="orderData.id">
              <p class="mb-0"><strong>Order ID:</strong> {{ orderData.id }}</p>
            </div>
            <p><strong>Product Type:</strong> {{ orderData.productType }}</p>
            <p><strong>Product Name:</strong> {{ orderData.productName || 'Not specified' }}</p>
          </div>
          <div class="col-md-6">
            <p><strong>Quantity:</strong> {{ orderData.quantity || 0 }}</p>
            <p *ngIf="orderData.totalPrice"><strong>Total Price:</strong> {{ orderData.totalPrice | currency }}</p>
          </div>
        </div>
      </div>

      <!-- Selected Oils -->
      <div class="mb-4 p-3 border rounded" *ngIf="orderData.selectedOils && orderData.selectedOils.length > 0">
        <h3 class="card-title">Selected Oils</h3>
        <ul class="list-group">
          <li class="list-group-item d-flex justify-content-between align-items-center" *ngFor="let oil of orderData.selectedOils">
            {{ oil.name || oil.id }}
            <span class="badge bg-primary rounded-pill">{{ oil.quantity || 1 }}</span>
          </li>
        </ul>
      </div>

      <!-- Visual Elements Section -->
      <div class="row mb-4">
        <!-- Shape Details -->
        <div class="col-md-4 mb-3" *ngIf="orderData.shapeId">
          <div class="card h-100">
            <div class="card-header">
              <h4 class="card-title mb-0">Shape Details</h4>
            </div>
            <div class="card-body text-center">
              <img *ngIf="orderData.shapeImageUrl" [src]="orderData.shapeImageUrl" 
                   alt="Selected Shape" class="img-fluid rounded" style="max-height: 200px;">
              <p class="mt-2" *ngIf="orderData.shapeName"><strong>{{ orderData.shapeName }}</strong></p>
            </div>
          </div>
        </div>

        <!-- Design Details -->
        <div class="col-md-4 mb-3" *ngIf="orderData.designId">
          <div class="card h-100">
            <div class="card-header">
              <h4 class="card-title mb-0">Design Details</h4>
            </div>
            <div class="card-body text-center">
              <img *ngIf="orderData.designUrl" [src]="orderData.designUrl" 
                   alt="Selected Design" class="img-fluid rounded" style="max-height: 200px;">
              <p class="mt-2" *ngIf="orderData.designName"><strong>{{ orderData.designName }}</strong></p>
            </div>
          </div>
        </div>

        <!-- Custom Image -->
        <div class="col-md-4 mb-3" *ngIf="orderData.customImage">
          <div class="card h-100">
            <div class="card-header">
              <h4 class="card-title mb-0">Custom Image</h4>
            </div>
            <div class="card-body text-center">
              <img *ngIf="orderData.customImage" [src]="orderData.customImage" 
                   alt="Custom Image" class="img-fluid rounded" style="max-height: 200px;">
            </div>
          </div>
        </div>
      </div>

      <!-- Client Information -->
      <div class="mb-4 p-3 border rounded" *ngIf="orderData.clientInfo">
        <h3 class="card-title">Client Information</h3>
        <div class="row">
          <div class="col-md-6">
            <p><strong>Name:</strong> {{ orderData.clientInfo.name }}</p>
            <p><strong>Email:</strong> {{ orderData.clientInfo.email }}</p>
            <p><strong>Phone:</strong> {{ orderData.clientInfo.phone }}</p>
          </div>
          <div class="col-md-6">
            <p><strong>Country:</strong> {{ orderData.clientInfo.country }}</p>
            <p><strong>City:</strong> {{ orderData.clientInfo.city }}</p>
            <p><strong>Street:</strong> {{ orderData.clientInfo.street }}</p>
          </div>
        </div>
      </div>

      <!-- Error Message -->
      <div class="alert alert-danger" *ngIf="errorMessage">
        {{ errorMessage }}
      </div>
    </div>

    <div class="card-footer d-flex justify-content-between">
      <button (click)="goBack()" class="btn btn-outline-secondary" [disabled]="isSubmitting">
        <i class="bi bi-arrow-left me-2"></i>Back to Client Info
      </button>
      <div>
        <button (click)="printOrder()" class="btn btn-info me-2" [disabled]="isSubmitting">
          <i class="bi bi-printer me-2"></i>Print
        </button>
        <button (click)="submitOrder()" class="btn btn-success" [disabled]="isSubmitting">
          <span *ngIf="!isSubmitting">
            <i class="bi bi-check-circle me-2"></i>Submit Order
          </span>
          <span *ngIf="isSubmitting">
            <span class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span>
            Processing...
          </span>
        </button>
      </div>
    </div>
  </div>
</div>